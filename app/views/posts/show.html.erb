<div class="container mt-4">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card">
        <!-- メディア表示部分 -->
        <div class="media-container">
          <% if @post.youtube_video_id.present? %>
            <!-- YouTube動画の埋め込み -->
            <div class="youtube-container">
              <iframe 
                src="<%= @post.youtube_embed_url %>" 
                width="100%" 
                height="400" 
                frameborder="0" 
                allowfullscreen
                class="rounded-top">
              </iframe>
            </div>
          <% elsif @post.image.attached? %>
            <!-- 通常の画像表示 -->
            <div class="image-container">
              <%= image_tag @post.image.variant(resize_to_limit: [800, 800]), 
                            alt: @post.title, 
                            class: "card-img-top" %>
            </div>
          <% end %>
        </div>
        
        <!-- 投稿内容 -->
        <div class="card-body">
          <h1 class="card-title h2 mb-3"><%= @post.title %></h1>
          
          <!-- 投稿者情報 -->
          <div class="d-flex align-items-center mb-3">
            <small class="text-muted">
              <i class="far fa-user me-2"></i>
              投稿者: <%= @post.user.name %>
            </small>
            <small class="text-muted ms-3">
              <i class="far fa-clock me-2"></i>
              <%= @post.created_at.strftime("%Y年%m月%d日 %H:%M") %>
            </small>
          </div>
          
          <!-- レビュー本文 -->
          <div class="card-text">
            <%= simple_format(@post.review_text) %>
          </div>
          
          <!-- YouTube URL表示（デバッグ用・必要に応じて削除） -->
          <% if @post.video_url.present? %>
            <div class="mt-3 p-2 bg-light rounded">
              <small class="text-muted">
                <i class="fab fa-youtube me-2"></i>
                YouTube URL: 
                <%= link_to @post.video_url, @post.video_url, 
                            target: '_blank', 
                            class: 'text-decoration-none' %>
              </small>
            </div>
          <% end %>
        </div>
        
        <!-- アクションボタン -->
        <div class="card-footer bg-transparent">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <%= link_to '一覧に戻る', posts_path, 
                          class: 'btn btn-outline-secondary' %>
            </div>
            
            <% if user_signed_in? && @post.user == current_user %>
              <div>
                <%= link_to '編集', edit_post_path(@post), 
                            class: 'btn btn-primary me-2' %>
                <%= link_to '削除', post_path(@post), 
                            data: { 
                              turbo_method: :delete , 
                              turbo_confirm: '本当に削除しますか？',
                            },
                            class: 'btn btn-danger' %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
